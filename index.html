<!doctype html>

<html lang="en">



<head>

    <meta charset="utf-8" />

    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <title>Trung Thu</title>

    <link

        href="https://fonts.googleapis.com/css2?family=Mali:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"

        rel="stylesheet">

    <style>

        :root {

            --accent: #ff7f50;

            --accent-2: #ff5722;

        }



        html,

        body {

            height: 100%;

            margin: 0;

            font-family: "Mali", cursive;

            background: #060614;

            overflow: hidden;

        }



        .stage {

            position: relative;

            min-height: 100vh;

            overflow: hidden;

        }



        canvas#starfield {

            display: block;

            width: 100%;

            height: 100%;

        }



        .moon {

            position: absolute;

            top: 60px;

            right: 100px;

            width: 160px;

            height: 160px;

            background: radial-gradient(circle at 30% 30%, #fff, #f8f8f8 70%, #e0e0e0 100%);

            border-radius: 50%;

            /* s·ª≠a m√†u trƒÉng */

            box-shadow:

                0 0 50px #ffffff7a,

                0 0 80px rgba(255, 255, 255, 0.7),

                0 0 100ox rgba(255, 255, 255, 0.4);

            filter: drop-shadow(0 0 25px rgba(255, 255, 200, 0.8));

            animation: moonGlow 6s ease-in-out infinite;

            z-index: 10;

        }



        @media (max-width:600px) {

            .moon {

                top: 40px;

                right: 14px;

                width: 70px;

                height: 70px;

            }



        }



        #lantern-container {

            position: fixed;

            bottom: 0;

            left: 0;

            width: 100%;

            height: 100%;

            pointer-events: none;

            overflow: hidden;

            z-index: 10;

        }



        .lantern {

            position: absolute;

            pointer-events: auto;

            width: 40px;

            user-select: none;

        }



        @keyframes swing {

            0% {

                transform: rotate(-5deg);

            }



            50% {

                transform: rotate(5deg);

            }



            100% {

                transform: rotate(-5deg);

            }

        }



        .swing {

            animation: swing 2s ease-in-out infinite;

        }



        #hint {

            position: fixed;

            bottom: 80px;

            left: 50%;

            transform: translateX(-50%);

            background: rgba(0, 0, 0, 0);

            color: #ffa722;

            padding: 10px 20px;

            border-radius: 10px;

            font-size: 28px;

            font-weight: 800;

            opacity: 0;

            transition: opacity 0.5s;

            z-index: 1000;

            pointer-events: none;

            text-align: center;

            white-space: nowrap;

            text-shadow:

                0 0 15px #ff8a50,

                0 0 20px #ffd180;



        }



        @media (max-width: 600px) {

            #hint {

                font-size: 22px;

                padding: 8px 12px;

            }

        }



        #wish-popup {

            position: fixed;

            top: 50%;

            left: 50%;

            transform: translate(-50%, -50%);

            background: rgba(255, 255, 255, 0.96);

            color: #ff8d22;

            padding: 35px 40px;

            border-radius: 12px;

            font-size: 1.8rem;

            font-weight: 700;

            display: none;

            z-index: 9999;

            box-shadow: 0 6px 30px rgba(0, 0, 0, 0.35);

            text-align: center;

            max-width: 60%;

            width: auto;

            box-sizing: border-box;

            pointer-events: auto;

            text-shadow:

                0 0 25px #ffd180;

            box-shadow:

                0 0 20px #ff8a50,

                0 0 25px #ffd180;

        }



        @media (max-width: 600px) {

            #wish-popup {

                font-size: 1.2rem;

                padding: 20px 25px;

                max-width: 80%;

                width: 80%;

            }

        }



        .controls {

            position: fixed;

            left: 18px;

            top: 18px;

            z-index: 10;

            color: #fff;

            font-size: 14px;

            background: rgba(0, 0, 0, 0.2);

            padding: 8px 12px;

            border-radius: 10px;

        }



        .music-toggle {

            cursor: pointer;

            margin-left: 10px;

            color: #fff;

            opacity: 0.95;

        }



        #bottom-image-container {

            position: fixed;

            bottom: 0;

            right: 20px;

            transform: none;

            z-index: 5;

            pointer-events: none;

        }



        #bottom-image-container img {

            height: 80px;

            width: auto;

            display: block;

        }



        @media (max-width: 600px) {

            #bottom-image-container img {

                height: 20px;

            }

        }
#play-music-btn {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(45deg, #ff9f43, #ff6b6b);
    color: white;
    font-weight: 700;
    font-size: 20px;
    border: none;
    border-radius: 12px;
    padding: 10px 24px;
    cursor: pointer;
    box-shadow: 0 0 15px rgba(255, 150, 80, 0.7);
    z-index: 2000;
    transition: 0.3s;
}
#play-music-btn:hover {
    transform: translateX(-50%) scale(1.08);
    box-shadow: 0 0 20px rgba(255, 180, 100, 0.9);
}
@media (max-width:600px) {
    #play-music-btn {
        font-size: 16px;
        padding: 8px 18px;
    }
}
    </style>

</head>



<body>

    <div class="stage">

        <canvas id="starfield"></canvas>



        <div class="moon" aria-hidden="true"></div>



        <div id="lantern-container"></div>



        <div id="wish-popup" role="dialog" aria-live="polite"></div>



        <div id="bottom-image-container">

            <!-- <img src="./ass.png" alt="Trang tr√≠ Trung Thu" /> -->

        </div>



        <!-- S·ª≠ ph·∫ßn h∆∞·ªõng d·∫´n ·ªü ƒë√¢y -->

        <div id="hint">Ch·∫°m v√†o ƒë√®n L·ªìng<br>M·ªü ng√†n l·ªùi ch√∫c</div>
        <button id="play-music-btn">Ph√°t nh·∫°c üéµ</button>



        <!-- Nh·∫°c s·ª≠a nh·∫°c n·ªÅn -->
        

        <audio id="bg-music" loop>

            <source src="a.mp3" type="audio/mp3">

            Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ th·∫ª audio.

        </audio>

    </div>



    <script>

        // ===== Canvas sao v√† sao bƒÉng =====

        const canvas = document.getElementById("starfield");

        const ctx = canvas.getContext("2d");

        let w, h, stars = [], meteors = [];



        function resizeCanvas() {

            w = canvas.width = innerWidth;

            h = canvas.height = innerHeight;

            stars = [];

            const count = Math.round((w * h) / 2200);

            for (let i = 0; i < count; i++) {

                stars.push({

                    x: Math.random() * w,

                    y: Math.random() * h,

                    r: Math.random() * 0.9 + 0.1,

                    a: Math.random() * 0.8 + 0.2,

                    t: Math.random() * 0.02 + 0.002

                });

            }

        }



        function drawStars() {

            ctx.clearRect(0, 0, w, h);

            for (const s of stars) {

                s.a += (Math.random() > 0.5 ? 1 : -1) * s.t;

                s.a = Math.max(0.05, Math.min(1, s.a));

                ctx.beginPath();

                ctx.globalAlpha = s.a;

                ctx.fillStyle = "#fff";

                ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);

                ctx.fill();

            }

            ctx.globalAlpha = 1;

        }



        function createMeteor() {

            const startX = Math.random() * w;

            const startY = Math.random() * (h / 3);

            const speed = Math.random() * 10 + 6;

            meteors.push({

                x: startX,

                y: startY,

                vx: speed + 6,

                vy: speed / 2,

                len: Math.random() * 120 + 100,

                a: 1

            });

        }



        function drawMeteors() {

            for (let i = meteors.length - 1; i >= 0; i--) {

                const m = meteors[i];

                const x2 = m.x - m.len;

                const y2 = m.y - m.len / 2;

                const g = ctx.createLinearGradient(m.x, m.y, x2, y2);

                g.addColorStop(0, `rgba(255,255,255,${m.a})`);

                g.addColorStop(1, "rgba(255,255,255,0)");

                ctx.strokeStyle = g;

                ctx.lineWidth = 2;

                ctx.beginPath();

                ctx.moveTo(m.x, m.y);

                ctx.lineTo(x2, y2);

                ctx.stroke();

                m.x += m.vx;

                m.y += m.vy;

                m.a -= 0.02;

                if (m.a <= 0 || m.x > w + 200 || m.y > h + 200) meteors.splice(i, 1);

            }

            ctx.strokeStyle = "#fff";

            ctx.lineWidth = 1;

        }



        function loop() {

            drawStars();

            drawMeteors();

            if (Math.random() < 0.01) createMeteor();

            requestAnimationFrame(loop);

        }



        window.addEventListener("resize", resizeCanvas);

        resizeCanvas();

        loop();



        // ===== ƒê√®n l·ªìng v√† l·ªùi ch√∫c =====

        const lanternContainer = document.getElementById("lantern-container");

        //S·ª≠ l·ªùi ch√∫c ·ªü ƒë√¢y

        const wishes = [

           "Ch√∫c 11C8 Trung Thu vui h·∫øt n·∫•c!",
           
"TrƒÉng r·∫±m s√°ng, t√¨nh b·∫°n 11C8 c√†ng s√°ng h∆°n!",

"Trung Thu n√†y, 11C8 m√£i r·ªôn r√†ng ti·∫øng c∆∞·ªùi!",

"Ch√∫c c·∫£ l·ªõp 11C8 ƒëo√†n k·∫øt, y√™u th∆∞∆°ng nh∆∞ trƒÉng tr√≤n!",

"TrƒÉng tr√≤n, t√¨nh b·∫°n 11C8 tr·ªçn v·∫πn!",

"Ch√∫c 11C8 c√≥ m√πa trƒÉng ng·ªçt ng√†o v√† ƒë√°ng nh·ªõ!",

"Trung Thu v·ªÅ, 11C8 th√™m nhi·ªÅu ni·ªÅm vui!",

"Ch√∫c anh em 11C8 trung thu th·∫≠t ƒë√£!",

"Ch√∫c 11C8 m·ªôt ƒë√™m trƒÉng lung linh v√† ·∫•m √°p!",

"C8 r·ª±c r·ª° nh∆∞ √°nh trƒÉng r·∫±m!",

"Trung Thu vui v·∫ª, h·ªçc gi·ªèi, c∆∞·ªùi t∆∞∆°i 11C8 nh√©!",

"Ch√∫c c·∫£ l·ªõp c√≥ Trung Thu ƒë·∫ßy ·∫Øp ti·∫øng c∆∞·ªùi!",

"TrƒÉng s√°ng, l√≤ng 11C8 c≈©ng s√°ng theo!",

"Ch√∫c 11C8 Trung Thu no n√™ v√† h·∫°nh ph√∫c!",

"Ch√∫c t·∫≠p th·ªÉ 11C8 lu√¥n vui t∆∞∆°i, ƒëo√†n k·∫øt!",

"Trung Thu n√†y, 11C8 v·∫´n l√† s·ªë 1!",

"Ch√∫c 11C8 tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng trƒÉng r·∫±m!",

"TrƒÉng tr√≤n, t√¨nh b·∫°n 11C8 c√†ng tr√≤n tr·ªãa!",

"Ch√∫c 11C8 m·ªôt m√πa trƒÉng th·∫≠t chill!",

"C√πng nhau vui Trung Thu ‚Äì 11C8 mu√¥n nƒÉm!"

        ];



        function createLantern() {

            const lantern = document.createElement("img");

            // s·ª≠a ƒë√®n l·ªìng ·ªü ƒë√¢y

            lantern.src = "./den.png";

            lantern.className = "lantern swing";



            const layer = Math.floor(Math.random() * 3) + 1;

            let size = 40, duration = 10000, opacity = 0.8;



            if (layer === 1) {

                size = 20 + Math.random() * 20;

                duration = 14000 + Math.random() * 5000;

                opacity = 0.5;

            } else if (layer === 2) {

                size = 30 + Math.random() * 30;

                duration = 12000 + Math.random() * 4000;

                opacity = 0.7;

            } else {

                size = 40 + Math.random() * 40;

                duration = 10000 + Math.random() * 3000;

                opacity = 0.95;

            }



            lantern.style.width = size + "px";

            lantern.style.left = Math.random() * 90 + "vw";

            lantern.style.bottom = "0px";

            lantern.style.opacity = opacity;



            lanternContainer.appendChild(lantern);



            const drift = Math.random() * 140 - 70;

            const up = 120 + Math.random() * 40;

            lantern.animate(

                [

                    { transform: "translate(0,0)", opacity: opacity },

                    { transform: `translate(${drift}px, -${up}vh)`, opacity: 0 }

                ],

                { duration: duration, easing: "linear", fill: "forwards" }

            );



            setTimeout(() => lantern.remove(), duration);



            lantern.addEventListener("click", (e) => {

                e.stopPropagation();

                const wishPopup = document.getElementById("wish-popup");

                wishPopup.textContent = wishes[Math.floor(Math.random() * wishes.length)];

                wishPopup.style.display = "block";

            });

        }



        setInterval(createLantern, 500);



       // ===== Nh·∫°c n·ªÅn: b·∫•m n√∫t m·ªõi ph√°t =====
const bg = document.getElementById("bg-music");
const playBtn = document.getElementById("play-music-btn");

playBtn.addEventListener("click", () => {
    bg.volume = 0;
    bg.play().then(() => {
        let v = 0;
        const fadeIn = setInterval(() => {
            v += 0.05;
            if (v >= 0.9) {
                v = 0.9;
                clearInterval(fadeIn);
            }
            bg.volume = v;
        }, 120);

        // ·∫®n n√∫t sau khi ph√°t
        playBtn.style.display = "none";
    }).catch((err) => {
        alert("Kh√¥ng th·ªÉ ph√°t nh·∫°c. Tr√¨nh duy·ªát c·ªßa b·∫°n c√≥ th·ªÉ ch·∫∑n t·ª± ƒë·ªông ph√°t!");
        console.error(err);
    });
});

        // ===== ·∫®n popup khi click ngo√†i =====

        document.addEventListener("click", (e) => {

            const pop = document.getElementById("wish-popup");

            if (pop && pop.style.display === "block") {

                pop.style.display = "none";

            }

        });



        document.addEventListener("pointerdown", function startMusicOnce() {

            if (!musicStarted && bg) {

                bg.volume = 0;

                bg.play().then(() => {

                    let v = 0;

                    const fadeIn = setInterval(() => {

                        v += 0.05;

                        if (v >= 0.9) {

                            v = 0.9;

                            clearInterval(fadeIn);

                        }

                        bg.volume = v;

                    }, 120);

                    musicStarted = true;

                }).catch((e) => {

                    console.log("Kh√¥ng th·ªÉ ph√°t nh·∫°c:", e);

                });

            }

            document.removeEventListener("pointerdown", startMusicOnce);

        });



        setTimeout(() => {

            if (hint) {

                hint.style.opacity = "1";

            }



            setTimeout(() => {

                if (hint) {

                    hint.style.opacity = "0";

                }

            }, 5000);

        }, 1000);

    </script>



</body>



</html>